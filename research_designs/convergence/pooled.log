
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   13.0   Copyright 1985-2013 StataCorp LP
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 2-core Stata perpetual license:
       Serial number:  501306004725
         Licensed to:  Miklos Koren
                       Central European University

Notes:
      1.  (-v# option or -set maxvar-) 5000 maximum variables
      2.  Command line editing disabled
      3.  Stata running in batch mode

. do pooled arkansas colorado columbia connecticut delaware hudson mississippi 
> missouri ohio red snake tennessee 

. clear

. set more off

. capture log close

. log using results/pooled.log, text replace
-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/koren/Dropbox (CEU MicroData)/projects/borders/bridges/rese
> arch_designs/convergence/results/pooled.log
  log type:  text
 opened on:   8 Oct 2014, 23:20:21

. 
. do create_variables  `1' `2' `3' `4' `5' `6' `7' `8' `9' `10' `11' `12' 

. tempfile rivers

. save `rivers', replace emptyok
(note: dataset contains 0 observations)
(note: file /var/folders/7b/svcv81g94n3fm6nrj7ckr15c0000gn/T//St13922.000001 no
> t found)
file /var/folders/7b/svcv81g94n3fm6nrj7ckr15c0000gn/T//St13922.000001 saved

. foreach river in `1' `2' `3' `4' `5' `6' `7' `8' `9' `10' `11' `12' {
  2.         di "`1'"
  3.         insheet using data/`river'.csv, clear
  4.         gen bridge = _n
  5.         gen str river = "`river'"
  6.         reshape long left_5km_ right_5km_ left_10km_ right_10km_, i(bridge
> ) j(year)
  7.         foreach X in left_5km right_5km left_10km right_10km {
  8.                 ren `X'_ `X'
  9.         }
 10.         append using `rivers'
 11.         save `rivers', replace
 12. }
arkansas
(445 vars, 145 obs)
(note: j = 1790 1791 1792 1793 1794 1795 1796 1797 1798 1799 1800 1801 1802 180
> 3 1804 1805 1806 1807 1808 1809 1810 1811 1812 1813 1814 1815 1816 1817 1818 
> 1819 1820 1821 1822 1823 1824 1825 1826 1827 1828 1829 1830 1831 1832 1833 18
> 34 1835 1836 1837 1838 1839 1840 1841 1842 1843 1844 1845 1846 1847 1848 1849
>  1850 1851 1852 1853 1854 1855 1856 1857 1858 1859 1860 1861 1862 1863 1864 1
> 865 1866 1867 1868 1869 1870 1871 1872 1873 1874 1875 1876 1877 1878 1879 188
> 0 1881 1882 1883 1884 1885 1886 1887 1888 1889 1890 1891 1892 1893 1894 1895 
> 1896 1897 1898 1899)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                      145   ->   15950
Number of variables                 447   ->      12
j variable (110 values)                   ->   year
xij variables:
left_5km_1790 left_5km_1791 ... left_5km_1899->left_5km_
right_5km_1790 right_5km_1791 ... right_5km_1899->right_5km_
left_10km_1790 left_10km_1791 ... left_10km_1899->left_10km_
right_10km_1790 right_10km_1791 ... right_10km_1899->right_10km_
-----------------------------------------------------------------------------
file /var/folders/7b/svcv81g94n3fm6nrj7ckr15c0000gn/T//St13922.000001 saved
arkansas
(445 vars, 159 obs)
(note: j = 1790 1791 1792 1793 1794 1795 1796 1797 1798 1799 1800 1801 1802 180
> 3 1804 1805 1806 1807 1808 1809 1810 1811 1812 1813 1814 1815 1816 1817 1818 
> 1819 1820 1821 1822 1823 1824 1825 1826 1827 1828 1829 1830 1831 1832 1833 18
> 34 1835 1836 1837 1838 1839 1840 1841 1842 1843 1844 1845 1846 1847 1848 1849
>  1850 1851 1852 1853 1854 1855 1856 1857 1858 1859 1860 1861 1862 1863 1864 1
> 865 1866 1867 1868 1869 1870 1871 1872 1873 1874 1875 1876 1877 1878 1879 188
> 0 1881 1882 1883 1884 1885 1886 1887 1888 1889 1890 1891 1892 1893 1894 1895 
> 1896 1897 1898 1899)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                      159   ->   17490
Number of variables                 447   ->      12
j variable (110 values)                   ->   year
xij variables:
left_5km_1790 left_5km_1791 ... left_5km_1899->left_5km_
right_5km_1790 right_5km_1791 ... right_5km_1899->right_5km_
left_10km_1790 left_10km_1791 ... left_10km_1899->left_10km_
right_10km_1790 right_10km_1791 ... right_10km_1899->right_10km_
-----------------------------------------------------------------------------
file /var/folders/7b/svcv81g94n3fm6nrj7ckr15c0000gn/T//St13922.000001 saved
arkansas
(445 vars, 104 obs)
(note: j = 1790 1791 1792 1793 1794 1795 1796 1797 1798 1799 1800 1801 1802 180
> 3 1804 1805 1806 1807 1808 1809 1810 1811 1812 1813 1814 1815 1816 1817 1818 
> 1819 1820 1821 1822 1823 1824 1825 1826 1827 1828 1829 1830 1831 1832 1833 18
> 34 1835 1836 1837 1838 1839 1840 1841 1842 1843 1844 1845 1846 1847 1848 1849
>  1850 1851 1852 1853 1854 1855 1856 1857 1858 1859 1860 1861 1862 1863 1864 1
> 865 1866 1867 1868 1869 1870 1871 1872 1873 1874 1875 1876 1877 1878 1879 188
> 0 1881 1882 1883 1884 1885 1886 1887 1888 1889 1890 1891 1892 1893 1894 1895 
> 1896 1897 1898 1899)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                      104   ->   11440
Number of variables                 447   ->      12
j variable (110 values)                   ->   year
xij variables:
left_5km_1790 left_5km_1791 ... left_5km_1899->left_5km_
right_5km_1790 right_5km_1791 ... right_5km_1899->right_5km_
left_10km_1790 left_10km_1791 ... left_10km_1899->left_10km_
right_10km_1790 right_10km_1791 ... right_10km_1899->right_10km_
-----------------------------------------------------------------------------
(note: variable name was str36, now str46 to accommodate using data's values)
file /var/folders/7b/svcv81g94n3fm6nrj7ckr15c0000gn/T//St13922.000001 saved
arkansas
(445 vars, 55 obs)
(note: j = 1790 1791 1792 1793 1794 1795 1796 1797 1798 1799 1800 1801 1802 180
> 3 1804 1805 1806 1807 1808 1809 1810 1811 1812 1813 1814 1815 1816 1817 1818 
> 1819 1820 1821 1822 1823 1824 1825 1826 1827 1828 1829 1830 1831 1832 1833 18
> 34 1835 1836 1837 1838 1839 1840 1841 1842 1843 1844 1845 1846 1847 1848 1849
>  1850 1851 1852 1853 1854 1855 1856 1857 1858 1859 1860 1861 1862 1863 1864 1
> 865 1866 1867 1868 1869 1870 1871 1872 1873 1874 1875 1876 1877 1878 1879 188
> 0 1881 1882 1883 1884 1885 1886 1887 1888 1889 1890 1891 1892 1893 1894 1895 
> 1896 1897 1898 1899)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                       55   ->    6050
Number of variables                 447   ->      12
j variable (110 values)                   ->   year
xij variables:
left_5km_1790 left_5km_1791 ... left_5km_1899->left_5km_
right_5km_1790 right_5km_1791 ... right_5km_1899->right_5km_
left_10km_1790 left_10km_1791 ... left_10km_1899->left_10km_
right_10km_1790 right_10km_1791 ... right_10km_1899->right_10km_
-----------------------------------------------------------------------------
file /var/folders/7b/svcv81g94n3fm6nrj7ckr15c0000gn/T//St13922.000001 saved
arkansas
(445 vars, 53 obs)
(note: j = 1790 1791 1792 1793 1794 1795 1796 1797 1798 1799 1800 1801 1802 180
> 3 1804 1805 1806 1807 1808 1809 1810 1811 1812 1813 1814 1815 1816 1817 1818 
> 1819 1820 1821 1822 1823 1824 1825 1826 1827 1828 1829 1830 1831 1832 1833 18
> 34 1835 1836 1837 1838 1839 1840 1841 1842 1843 1844 1845 1846 1847 1848 1849
>  1850 1851 1852 1853 1854 1855 1856 1857 1858 1859 1860 1861 1862 1863 1864 1
> 865 1866 1867 1868 1869 1870 1871 1872 1873 1874 1875 1876 1877 1878 1879 188
> 0 1881 1882 1883 1884 1885 1886 1887 1888 1889 1890 1891 1892 1893 1894 1895 
> 1896 1897 1898 1899)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                       53   ->    5830
Number of variables                 447   ->      12
j variable (110 values)                   ->   year
xij variables:
left_5km_1790 left_5km_1791 ... left_5km_1899->left_5km_
right_5km_1790 right_5km_1791 ... right_5km_1899->right_5km_
left_10km_1790 left_10km_1791 ... left_10km_1899->left_10km_
right_10km_1790 right_10km_1791 ... right_10km_1899->right_10km_
-----------------------------------------------------------------------------
(note: variable name was str41, now str50 to accommodate using data's values)
(note: variable river was str8, now str11 to accommodate using data's values)
file /var/folders/7b/svcv81g94n3fm6nrj7ckr15c0000gn/T//St13922.000001 saved
arkansas
(445 vars, 33 obs)
(note: j = 1790 1791 1792 1793 1794 1795 1796 1797 1798 1799 1800 1801 1802 180
> 3 1804 1805 1806 1807 1808 1809 1810 1811 1812 1813 1814 1815 1816 1817 1818 
> 1819 1820 1821 1822 1823 1824 1825 1826 1827 1828 1829 1830 1831 1832 1833 18
> 34 1835 1836 1837 1838 1839 1840 1841 1842 1843 1844 1845 1846 1847 1848 1849
>  1850 1851 1852 1853 1854 1855 1856 1857 1858 1859 1860 1861 1862 1863 1864 1
> 865 1866 1867 1868 1869 1870 1871 1872 1873 1874 1875 1876 1877 1878 1879 188
> 0 1881 1882 1883 1884 1885 1886 1887 1888 1889 1890 1891 1892 1893 1894 1895 
> 1896 1897 1898 1899)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                       33   ->    3630
Number of variables                 447   ->      12
j variable (110 values)                   ->   year
xij variables:
left_5km_1790 left_5km_1791 ... left_5km_1899->left_5km_
right_5km_1790 right_5km_1791 ... right_5km_1899->right_5km_
left_10km_1790 left_10km_1791 ... left_10km_1899->left_10km_
right_10km_1790 right_10km_1791 ... right_10km_1899->right_10km_
-----------------------------------------------------------------------------
(note: variable name was str41, now str50 to accommodate using data's values)
(note: variable river was str6, now str11 to accommodate using data's values)
file /var/folders/7b/svcv81g94n3fm6nrj7ckr15c0000gn/T//St13922.000001 saved
arkansas
(445 vars, 335 obs)
(note: j = 1790 1791 1792 1793 1794 1795 1796 1797 1798 1799 1800 1801 1802 180
> 3 1804 1805 1806 1807 1808 1809 1810 1811 1812 1813 1814 1815 1816 1817 1818 
> 1819 1820 1821 1822 1823 1824 1825 1826 1827 1828 1829 1830 1831 1832 1833 18
> 34 1835 1836 1837 1838 1839 1840 1841 1842 1843 1844 1845 1846 1847 1848 1849
>  1850 1851 1852 1853 1854 1855 1856 1857 1858 1859 1860 1861 1862 1863 1864 1
> 865 1866 1867 1868 1869 1870 1871 1872 1873 1874 1875 1876 1877 1878 1879 188
> 0 1881 1882 1883 1884 1885 1886 1887 1888 1889 1890 1891 1892 1893 1894 1895 
> 1896 1897 1898 1899)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                      335   ->   36850
Number of variables                 447   ->      12
j variable (110 values)                   ->   year
xij variables:
left_5km_1790 left_5km_1791 ... left_5km_1899->left_5km_
right_5km_1790 right_5km_1791 ... right_5km_1899->right_5km_
left_10km_1790 left_10km_1791 ... left_10km_1899->left_10km_
right_10km_1790 right_10km_1791 ... right_10km_1899->right_10km_
-----------------------------------------------------------------------------
file /var/folders/7b/svcv81g94n3fm6nrj7ckr15c0000gn/T//St13922.000001 saved
arkansas
(445 vars, 335 obs)
(note: j = 1790 1791 1792 1793 1794 1795 1796 1797 1798 1799 1800 1801 1802 180
> 3 1804 1805 1806 1807 1808 1809 1810 1811 1812 1813 1814 1815 1816 1817 1818 
> 1819 1820 1821 1822 1823 1824 1825 1826 1827 1828 1829 1830 1831 1832 1833 18
> 34 1835 1836 1837 1838 1839 1840 1841 1842 1843 1844 1845 1846 1847 1848 1849
>  1850 1851 1852 1853 1854 1855 1856 1857 1858 1859 1860 1861 1862 1863 1864 1
> 865 1866 1867 1868 1869 1870 1871 1872 1873 1874 1875 1876 1877 1878 1879 188
> 0 1881 1882 1883 1884 1885 1886 1887 1888 1889 1890 1891 1892 1893 1894 1895 
> 1896 1897 1898 1899)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                      335   ->   36850
Number of variables                 447   ->      12
j variable (110 values)                   ->   year
xij variables:
left_5km_1790 left_5km_1791 ... left_5km_1899->left_5km_
right_5km_1790 right_5km_1791 ... right_5km_1899->right_5km_
left_10km_1790 left_10km_1791 ... left_10km_1899->left_10km_
right_10km_1790 right_10km_1791 ... right_10km_1899->right_10km_
-----------------------------------------------------------------------------
(note: variable name was str42, now str61 to accommodate using data's values)
(note: variable river was str8, now str11 to accommodate using data's values)
file /var/folders/7b/svcv81g94n3fm6nrj7ckr15c0000gn/T//St13922.000001 saved
arkansas
(445 vars, 164 obs)
(note: j = 1790 1791 1792 1793 1794 1795 1796 1797 1798 1799 1800 1801 1802 180
> 3 1804 1805 1806 1807 1808 1809 1810 1811 1812 1813 1814 1815 1816 1817 1818 
> 1819 1820 1821 1822 1823 1824 1825 1826 1827 1828 1829 1830 1831 1832 1833 18
> 34 1835 1836 1837 1838 1839 1840 1841 1842 1843 1844 1845 1846 1847 1848 1849
>  1850 1851 1852 1853 1854 1855 1856 1857 1858 1859 1860 1861 1862 1863 1864 1
> 865 1866 1867 1868 1869 1870 1871 1872 1873 1874 1875 1876 1877 1878 1879 188
> 0 1881 1882 1883 1884 1885 1886 1887 1888 1889 1890 1891 1892 1893 1894 1895 
> 1896 1897 1898 1899)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                      164   ->   18040
Number of variables                 447   ->      12
j variable (110 values)                   ->   year
xij variables:
left_5km_1790 left_5km_1791 ... left_5km_1899->left_5km_
right_5km_1790 right_5km_1791 ... right_5km_1899->right_5km_
left_10km_1790 left_10km_1791 ... left_10km_1899->left_10km_
right_10km_1790 right_10km_1791 ... right_10km_1899->right_10km_
-----------------------------------------------------------------------------
(note: variable name was str45, now str61 to accommodate using data's values)
(note: variable river was str4, now str11 to accommodate using data's values)
file /var/folders/7b/svcv81g94n3fm6nrj7ckr15c0000gn/T//St13922.000001 saved
arkansas
(445 vars, 126 obs)
(note: j = 1790 1791 1792 1793 1794 1795 1796 1797 1798 1799 1800 1801 1802 180
> 3 1804 1805 1806 1807 1808 1809 1810 1811 1812 1813 1814 1815 1816 1817 1818 
> 1819 1820 1821 1822 1823 1824 1825 1826 1827 1828 1829 1830 1831 1832 1833 18
> 34 1835 1836 1837 1838 1839 1840 1841 1842 1843 1844 1845 1846 1847 1848 1849
>  1850 1851 1852 1853 1854 1855 1856 1857 1858 1859 1860 1861 1862 1863 1864 1
> 865 1866 1867 1868 1869 1870 1871 1872 1873 1874 1875 1876 1877 1878 1879 188
> 0 1881 1882 1883 1884 1885 1886 1887 1888 1889 1890 1891 1892 1893 1894 1895 
> 1896 1897 1898 1899)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                      126   ->   13860
Number of variables                 447   ->      12
j variable (110 values)                   ->   year
xij variables:
left_5km_1790 left_5km_1791 ... left_5km_1899->left_5km_
right_5km_1790 right_5km_1791 ... right_5km_1899->right_5km_
left_10km_1790 left_10km_1791 ... left_10km_1899->left_10km_
right_10km_1790 right_10km_1791 ... right_10km_1899->right_10km_
-----------------------------------------------------------------------------
(note: variable name was str34, now str61 to accommodate using data's values)
(note: variable river was str3, now str11 to accommodate using data's values)
file /var/folders/7b/svcv81g94n3fm6nrj7ckr15c0000gn/T//St13922.000001 saved
arkansas
(445 vars, 128 obs)
(note: j = 1790 1791 1792 1793 1794 1795 1796 1797 1798 1799 1800 1801 1802 180
> 3 1804 1805 1806 1807 1808 1809 1810 1811 1812 1813 1814 1815 1816 1817 1818 
> 1819 1820 1821 1822 1823 1824 1825 1826 1827 1828 1829 1830 1831 1832 1833 18
> 34 1835 1836 1837 1838 1839 1840 1841 1842 1843 1844 1845 1846 1847 1848 1849
>  1850 1851 1852 1853 1854 1855 1856 1857 1858 1859 1860 1861 1862 1863 1864 1
> 865 1866 1867 1868 1869 1870 1871 1872 1873 1874 1875 1876 1877 1878 1879 188
> 0 1881 1882 1883 1884 1885 1886 1887 1888 1889 1890 1891 1892 1893 1894 1895 
> 1896 1897 1898 1899)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                      128   ->   14080
Number of variables                 447   ->      12
j variable (110 values)                   ->   year
xij variables:
left_5km_1790 left_5km_1791 ... left_5km_1899->left_5km_
right_5km_1790 right_5km_1791 ... right_5km_1899->right_5km_
left_10km_1790 left_10km_1791 ... left_10km_1899->left_10km_
right_10km_1790 right_10km_1791 ... right_10km_1899->right_10km_
-----------------------------------------------------------------------------
(note: variable name was str41, now str61 to accommodate using data's values)
(note: variable river was str5, now str11 to accommodate using data's values)
file /var/folders/7b/svcv81g94n3fm6nrj7ckr15c0000gn/T//St13922.000001 saved
arkansas
(445 vars, 75 obs)
(note: j = 1790 1791 1792 1793 1794 1795 1796 1797 1798 1799 1800 1801 1802 180
> 3 1804 1805 1806 1807 1808 1809 1810 1811 1812 1813 1814 1815 1816 1817 1818 
> 1819 1820 1821 1822 1823 1824 1825 1826 1827 1828 1829 1830 1831 1832 1833 18
> 34 1835 1836 1837 1838 1839 1840 1841 1842 1843 1844 1845 1846 1847 1848 1849
>  1850 1851 1852 1853 1854 1855 1856 1857 1858 1859 1860 1861 1862 1863 1864 1
> 865 1866 1867 1868 1869 1870 1871 1872 1873 1874 1875 1876 1877 1878 1879 188
> 0 1881 1882 1883 1884 1885 1886 1887 1888 1889 1890 1891 1892 1893 1894 1895 
> 1896 1897 1898 1899)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                       75   ->    8250
Number of variables                 447   ->      12
j variable (110 values)                   ->   year
xij variables:
left_5km_1790 left_5km_1791 ... left_5km_1899->left_5km_
right_5km_1790 right_5km_1791 ... right_5km_1899->right_5km_
left_10km_1790 left_10km_1791 ... left_10km_1899->left_10km_
right_10km_1790 right_10km_1791 ... right_10km_1899->right_10km_
-----------------------------------------------------------------------------
(note: variable name was str57, now str61 to accommodate using data's values)
(note: variable river was str9, now str11 to accommodate using data's values)
file /var/folders/7b/svcv81g94n3fm6nrj7ckr15c0000gn/T//St13922.000001 saved

. egen river_bridge = group(river bridge)

. egen river_year = group(river year)

. gen segment = int(river_mile/10)

. egen river_segment = group(river segment)

. 
. tsset river_bridge year
       panel variable:  river_bridge (strongly balanced)
        time variable:  year, 1790 to 1899
                delta:  1 unit

. 
. * replicate previous results with 10km disc
. gen left = left_10km

. gen right = right_10km

. 
. * measures of clustering
. gen center = left_5km+right_5km

. gen ring = left_10km+right_10km-center

. 
. gen total = left+right

. 
. gen start_decade = int(start/10)*10
(116930 missing values generated)

. local dec 3

. local window `dec'0

. 
. local sample_window 40

. local latest 1900

. 
. * for ease of reading, introduce a round offset for event time
. scalar offset = 100

. gen event_time = year-start+offset
(116930 missing values generated)

. * also keep control regions
. keep if abs(event_time-offset)<=`sample_window' | missing(start)
(55338 observations deleted)

. * only use 19th century, when post offices are relevant
. keep if year<=`latest' & (start_decade<=`latest' | missing(start))
(3241 observations deleted)

. 
. replace event_time = -`window'+offset if event_time<-`window'+offset
(2208 real changes made)

. replace event_time = `window'+offset if event_time>`window'+offset & !missing
> (event_time)
(417 real changes made)

. 
. forval t = 70/130 {
  2.         gen byte treatment`t' = (event_time==`t')
  3. }

. 
. gen byte no_bridge = missing(start)

. gen byte before = year<start & !no_bridge

. gen byte after = year>=start

. 
. egen left_before = sum(cond(!after,left,0)), by(river_bridge)

. egen right_before = sum(cond(!after,right,0)), by(river_bridge)

. 
. gen small = cond(left_before<right_before,left,right)

. gen large = cond(left_before<right_before,right,left)

. gen log_small = ln(small)
(103160 missing values generated)

. gen log_large = ln(large)
(87287 missing values generated)

. 
. gen river_mile_sq = river_mile^2

. 
. gen small_share = small/total
(85902 missing values generated)

. replace small_share=0 if total==0
(85902 real changes made)

. * if total number of post offices is poisson, the variance is sqrt of mean
. gen scaled_difference = cond(left_before<right_before,right-left,left-right)/
> sqrt(total)
(85902 missing values generated)

. 
. gen deviation = 0.5-small_share

. tsset river_bridge year
       panel variable:  river_bridge (unbalanced)
        time variable:  year, 1790 to 1899
                delta:  1 unit

. gen change = deviation-L1.deviation
(1300 missing values generated)

. gen lag_deviation = L1.deviation
(1300 missing values generated)

. 
end of do-file

. do estimate_and_plot

. areg small_share treatment*, a(river_year) cluster(river_segment)

Linear regression, absorbing indicators           Number of obs   =     129741
                                                  F(  61,    817) =       2.53
                                                  Prob > F        =     0.0000
                                                  R-squared       =     0.3240
                                                  Adj R-squared   =     0.3167
                                                  Root MSE        =     0.1563

                        (Std. Err. adjusted for 818 clusters in river_segment)
------------------------------------------------------------------------------
             |               Robust
 small_share |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
 treatment70 |   .0599482   .0177626     3.37   0.001     .0250825     .094814
 treatment71 |   .0722647   .0194939     3.71   0.000     .0340006    .1105288
 treatment72 |   .0777337   .0218021     3.57   0.000     .0349389    .1205284
 treatment73 |   .0717882     .01956     3.67   0.000     .0333944     .110182
 treatment74 |   .0726894   .0200116     3.63   0.000     .0334092    .1119696
 treatment75 |    .075752   .0208675     3.63   0.000     .0347918    .1167122
 treatment76 |   .0772339   .0210639     3.67   0.000     .0358882    .1185797
 treatment77 |   .0783158   .0209605     3.74   0.000     .0371729    .1194586
 treatment78 |   .0784886    .021242     3.69   0.000     .0367934    .1201839
 treatment79 |   .0779649   .0209089     3.73   0.000     .0369235    .1190063
 treatment80 |    .084332    .021653     3.89   0.000       .04183     .126834
 treatment81 |   .0798219   .0216396     3.69   0.000     .0373463    .1222976
 treatment82 |   .0819378   .0217153     3.77   0.000     .0393134    .1245623
 treatment83 |   .0758655    .021182     3.58   0.000      .034288    .1174429
 treatment84 |   .0728338   .0207229     3.51   0.000     .0321574    .1135101
 treatment85 |   .0698636   .0202479     3.45   0.001     .0301195    .1096077
 treatment86 |   .0677796   .0202366     3.35   0.001     .0280578    .1075015
 treatment87 |   .0739518   .0209455     3.53   0.000     .0328386     .115065
 treatment88 |   .0681653   .0206917     3.29   0.001     .0275502    .1087805
 treatment89 |   .0636879   .0208016     3.06   0.002      .022857    .1045187
 treatment90 |   .0636616   .0204955     3.11   0.002     .0234316    .1038915
 treatment91 |   .0670726   .0201615     3.33   0.001     .0274982     .106647
 treatment92 |   .0698281   .0200046     3.49   0.001     .0305616    .1090946
 treatment93 |   .0645377   .0194901     3.31   0.001     .0262812    .1027942
 treatment94 |   .0692305   .0198367     3.49   0.001     .0302935    .1081674
 treatment95 |   .0682413    .020057     3.40   0.001     .0288719    .1076107
 treatment96 |    .073081   .0206827     3.53   0.000     .0324836    .1136785
 treatment97 |   .0797687   .0206913     3.86   0.000     .0391543     .120383
 treatment98 |   .0803982   .0211311     3.80   0.000     .0389205    .1218759
 treatment99 |   .0788415   .0210261     3.75   0.000       .03757     .120113
treatment100 |   .0867947    .021594     4.02   0.000     .0444085     .129181
treatment101 |   .0884989   .0216583     4.09   0.000     .0459865    .1310113
treatment102 |   .0906972   .0216659     4.19   0.000     .0481699    .1332245
treatment103 |    .096315   .0207324     4.65   0.000       .05562      .13701
treatment104 |   .0919554   .0204654     4.49   0.000     .0517845    .1321263
treatment105 |   .0960352   .0203812     4.71   0.000     .0560295    .1360409
treatment106 |   .0950257   .0207135     4.59   0.000     .0543678    .1356836
treatment107 |   .0914409   .0207385     4.41   0.000     .0507339    .1321478
treatment108 |   .0939523   .0216863     4.33   0.000     .0513848    .1365198
treatment109 |   .1005137   .0225617     4.46   0.000     .0562279    .1447994
treatment110 |   .1062662   .0231307     4.59   0.000     .0608636    .1516689
treatment111 |   .1064632   .0231462     4.60   0.000     .0610302    .1518962
treatment112 |   .1055803   .0243312     4.34   0.000     .0578212    .1533393
treatment113 |   .1142004   .0252875     4.52   0.000     .0645643    .1638366
treatment114 |   .1154831   .0258108     4.47   0.000     .0648198    .1661464
treatment115 |   .1157462   .0261606     4.42   0.000     .0643964    .1670961
treatment116 |   .1138059    .027014     4.21   0.000      .060781    .1668309
treatment117 |   .1080138   .0269287     4.01   0.000     .0551561    .1608714
treatment118 |   .1043094   .0256113     4.07   0.000     .0540376    .1545812
treatment119 |   .1050571   .0257389     4.08   0.000     .0545349    .1555794
treatment120 |   .1171716   .0286605     4.09   0.000     .0609146    .1734285
treatment121 |   .1138989   .0288946     3.94   0.000     .0571826    .1706153
treatment122 |   .1189249   .0295932     4.02   0.000     .0608374    .1770125
treatment123 |   .1216828   .0274366     4.44   0.000     .0678283    .1755374
treatment124 |   .1238503   .0285219     4.34   0.000     .0678655    .1798351
treatment125 |   .1208051   .0290404     4.16   0.000     .0638024    .1778077
treatment126 |   .1155066    .029896     3.86   0.000     .0568245    .1741887
treatment127 |   .1077166   .0309132     3.48   0.001      .047038    .1683953
treatment128 |    .109879   .0315491     3.48   0.001     .0479522    .1718058
treatment129 |   .1243921   .0353653     3.52   0.000     .0549746    .1938096
treatment130 |   .1161941   .0372052     3.12   0.002      .043165    .1892232
       _cons |   .0785937   .0036363    21.61   0.000     .0714561    .0857312
-------------+----------------------------------------------------------------
  river_year |   absorbed                                    (1320 categories)

. *test (treatment70+treatment80+treatment80)/3==(treatment110+treatment120+tre
> atment130)/3
. predict small_share_hat, xb

. gen se = .
(129741 missing values generated)

. forval t=70/130 {
  2.         replace se = _se[treatment`t'] if event_time==`t'
  3. }
(2429 real changes made)
(222 real changes made)
(222 real changes made)
(222 real changes made)
(222 real changes made)
(222 real changes made)
(224 real changes made)
(224 real changes made)
(224 real changes made)
(225 real changes made)
(226 real changes made)
(226 real changes made)
(226 real changes made)
(227 real changes made)
(229 real changes made)
(231 real changes made)
(233 real changes made)
(234 real changes made)
(235 real changes made)
(235 real changes made)
(235 real changes made)
(228 real changes made)
(219 real changes made)
(214 real changes made)
(207 real changes made)
(202 real changes made)
(199 real changes made)
(194 real changes made)
(190 real changes made)
(189 real changes made)
(185 real changes made)
(179 real changes made)
(179 real changes made)
(175 real changes made)
(170 real changes made)
(165 real changes made)
(161 real changes made)
(158 real changes made)
(152 real changes made)
(142 real changes made)
(130 real changes made)
(126 real changes made)
(118 real changes made)
(111 real changes made)
(106 real changes made)
(103 real changes made)
(99 real changes made)
(96 real changes made)
(94 real changes made)
(94 real changes made)
(89 real changes made)
(88 real changes made)
(85 real changes made)
(82 real changes made)
(80 real changes made)
(80 real changes made)
(77 real changes made)
(71 real changes made)
(67 real changes made)
(61 real changes made)
(473 real changes made)

. *replace se = _se[_cons] if event_time==70
. 
. xi: areg change i.after*lag_deviation, a(river_year)  cluster(river_segment)
i.after           _Iafter_0-1         (naturally coded; _Iafter_0 omitted)
i.after*lag_d~n   _IaftXlag_d_#       (coded as above)

Linear regression, absorbing indicators           Number of obs   =     128441
                                                  F(   3,    817) =     139.23
                                                  Prob > F        =     0.0000
                                                  R-squared       =     0.0335
                                                  Adj R-squared   =     0.0235
                                                  Root MSE        =     0.0448

                        (Std. Err. adjusted for 818 clusters in river_segment)
------------------------------------------------------------------------------
             |               Robust
      change |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   _Iafter_1 |  -.0041247   .0011145    -3.70   0.000    -.0063123   -.0019371
lag_deviat~n |  -.0351358   .0017636   -19.92   0.000    -.0385974   -.0316741
_IaftXlag_~1 |   .0005336   .0072965     0.07   0.942    -.0137885    .0148557
       _cons |   .0127676   .0007092    18.00   0.000     .0113755    .0141597
-------------+----------------------------------------------------------------
  river_year |   absorbed                                    (1308 categories)

. 
. replace event_time = event_time - offset
(12811 real changes made)

. label var small_share_hat "Share of smaller side of the river"

. label var event_time "Years since bridge"

. 
. gen upper = small_share_hat + 1.96*se
(116930 missing values generated)

. gen lower = small_share_hat - 1.96*se
(116930 missing values generated)

. tw (area  upper lower event_time, sort astyle( ci plotregion)) (line small_sh
> are_hat event_time, sort),  scheme(s2color) legend(order(1 "95% confidence in
> terval" 3 "Share of smaller side of the river"))

. 
end of do-file

. graph save results/pooled.gph, replace
(file results/pooled.gph saved)

. 
. 
. capture log close

. 
end of do-file
